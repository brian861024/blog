---
title: 使用者、角色與權限(2)
published: 2026-02-11
tags: [Coding, Notes, RBAC]
category: 程式雜記
description: 角色大亂鬥！
draft: false
---

# 當需求不再簡單

當公司還小的時候，一切都很單純。
<br>
人不多、部門少，系統也還瘦。
<br>
用「角色」綁權限就能解決大部分資料隔離的需求，例如：

- 業務 → 看業務資料
- 財務 → 看財務資料
- 管理者 → 看全部

角色清楚、權限固定，大家各司其職，系統也運作得很順。

<hr>

但當公司開始成長——
<br>
從幾十人變成幾百人，甚至上千人——**事情就不再那麼簡單**。

單位變多了，部門分工更細了。
<br>
每個部門都有自己的資料，每筆資料也可能屬於不同的承辦人、不同的專案、不同的客戶。

這時候開始出現新的需求：

- 業務人員需要「暫時」查看某些客戶的個資。
- 不同業務人員看到的資料範圍都不一樣。
- 有些權限只需要開放幾天，之後又要收回。
- 同一個人可能同時參與多個專案，跨多個部門。

<hr>

如果這時候仍然只靠「角色」來解決問題，就會發生一連串的混亂。

例如：

>第一天
><br>
>業務人員 A 需要看到「單位 B」管理的客戶個資。
><br>
>→ 好，我們為他建立一個新的角色。

>第二天
><br>
>業務人員 A 又需要看到「單位 C」的文件。
><br>
>→ 那我們再建立一個新角色，把兩個權限都放進去。

>第三天
><br>
>業務內容又改了，他現在只需要看到其中一部分資料。
><br>
>→ 那是不是又要再創一個角色？

久而久之，角色越來越多，而且因為性質重複，
<br>
角色名稱變得越來越難以理解、權限內容彼此重疊、管理成本越來越高。

原本是為了方便管理而設計的「角色」，
<br>
反而變成難以維護的權限迷宮。

<hr>

# 我們到底在管理什麼？

其實，我們真正要控制的，從來都不是「角色」，
<br>
而是這個人能不能做這件事。

也就是說，在權限管理裡，
<br>
最小的基本單位不是角色，而是「行為」。

- 能不能查看客戶個資？
- 能不能編輯文件？
- 能不能匯出PDF？
- 能不能簽核表單？

:::tip
這些「可不可以做某件事」，
才是權限真正的基本粒子。
:::

<hr>

所謂的「角色」，其實只是權限的套餐。

我們把一組行為打包起來，取一個名字，例如「業務」、「主管」、「客服」，然後讓擁有該角色的人，自動擁有這一組行為。

在需求單純、結構穩定的時候，這樣的設計其實很有效率。

但當需求開始頻繁變動時，問題就出現了：

- 不同人需要不同的資料範圍，
- 權限可能是暫時性的。
- 專案跨部門合作越來越多。
- 同一個角色下的人，實際需求卻不完全相同。

這時候，如果還是用「新增角色」來解決問題，
<br>
角色數量就會失控，
<br>
權限結構也會變得混亂。

<hr>

因此，當複雜度提升時，
<br>
我們需要把「權限」從「角色」中拆出來，讓它獨立存在。

讓角色不再是僵化的權限集合，
<br>
而是一個可以被靈活組裝、隨時調整的容器。

系統管理員可以：

- 動態調整角色所包含的行為
- 視情況增減某個人的個別權限
- 在不新增大量角色的情況下，滿足各種變動需求

這樣一來，結構反而更簡潔。

因為我們管理的是清晰的「行為集合」，
<br>
而不是不斷膨脹的「角色組合」。

<hr>

這也意味著，
<br>
權限管理的思維，從「以角色為中心」，
<br>
轉向「以行為為中心」。

當權限本身變成可組裝、可調整、可追蹤的單位，
<br>
系統就能在成長之中，依然保持秩序。

<hr>
實現這個概念所需要的表格，
<br>
並且權限可以是集合而非單一行為，例如說以單位、以業務等等。

- User
- Role
- Permission
- User-Role
- Role-Permission